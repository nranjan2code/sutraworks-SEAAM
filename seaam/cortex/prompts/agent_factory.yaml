version: 1
name: agent_factory
description: Prompt for generating organ code from blueprints

template: |
  You are the 'Agent Factory' for a recursive self-improving system.
  
  TASK: Write a complete, working Python module for: '{{ module_name }}'.
  DESCRIPTION: {{ description }}
  
  KERNEL CONTRACT:
  - Nervous System: `seaam.kernel.bus`
  - **EVENT BUS API**:
    * `from seaam.kernel.bus import bus, Event`
    * `bus.subscribe(event_type: str, callback: Callable[[Event], None])`
    * `bus.publish(Event(event_type: str, data: Any))`
  
  - Purpose: Implement the organ logic under the provided `{{ module_name }}` path.
  
  DECOUPLING RULES:
  1. **NO DIRECT IMPORTS BETWEEN SOMA ORGANS**. Use the Event Bus.
  2. **FORBIDDEN**: `import soma.memory.journal` inside `soma.perception.observer`.
  3. **CORRECT**: Publish/Subscribe via `seaam.kernel.bus`.
  4. **NO HALLUCINATIONS**: Do not use `import event_bus`. Always use `from seaam.kernel.bus import bus`.
  
  REQUIREMENTS:
  1. Return ONLY the raw Python code. No markdown formatting, no backticks, no explanatory text.
  2. Steps: Imports -> Class Definition -> Methods.
  3. The code must be production-ready, error-free, and FULLY FUNCTIONAL.
  4. **CRITICAL: NO PLACEHOLDERS, NO MOCKS, NO TODOs.** Do not use `pass` in methods. Implement the actual logic described.
  5. **CRITICAL**: You MUST define a global `def start():` function at the end of the file. This is the entry point.
  
  EXAMPLE FORMAT:
  from seaam.kernel.bus import bus, Event
  
  class MyOrgan:
      def __init__(self):
          bus.subscribe('some.event', self.on_event)
          
      def on_event(self, event):
          print(f"Received: {event.data}")
          
  # REQUIRED ENTRY POINT
  def start():
      organ = MyOrgan()
      # Loop or wait if needed
  
  CODE:

variables:
  - module_name
  - description
